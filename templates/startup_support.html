<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1ì¸ ì°½ì—… ì§€ì›ì‚¬ì—… íƒìƒ‰ - Qhyx</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .profile-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .profile-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .profile-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .form-group select,
        .form-group input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card .number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-card .label {
            color: #666;
            font-size: 1.1em;
        }

        .filter-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: #667eea;
            color: white;
        }

        .programs-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .program-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }

        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .program-card .category-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .program-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.4em;
            padding-right: 100px;
        }

        .program-card .organization {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .program-card .support-amount {
            background: #f0f4ff;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-weight: 600;
            color: #764ba2;
        }

        .program-card .description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .program-card .details {
            border-top: 1px solid #e0e0e0;
            padding-top: 15px;
            margin-top: 15px;
        }

        .program-card .detail-item {
            display: flex;
            margin-bottom: 10px;
        }

        .program-card .detail-item .label {
            font-weight: 600;
            color: #333;
            min-width: 100px;
        }

        .program-card .detail-item .value {
            color: #666;
        }

        .program-card .actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .program-card .btn-small {
            padding: 8px 16px;
            font-size: 0.9em;
            flex: 1;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .program-card .btn-small:hover {
            background: #764ba2;
        }

        .recommended-badge {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 700;
            margin-bottom: 15px;
            display: inline-block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: white;
            font-size: 1.2em;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: white;
            font-size: 1.2em;
        }

        .requirements-list,
        .benefits-list {
            list-style: none;
            padding-left: 0;
        }

        .requirements-list li,
        .benefits-list li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .requirements-list li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .benefits-list li:before {
            content: "â˜…";
            position: absolute;
            left: 0;
            color: #ffd700;
        }

        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ 1ì¸ ì°½ì—… ì§€ì›ì‚¬ì—… íƒìƒ‰</h1>
            <p>ëŒ€í•œë¯¼êµ­ ì •ë¶€ ë° ì§€ìì²´ì˜ ëª¨ë“  ì°½ì—… ì§€ì› ì •ì±…ì„ í•œëˆˆì—</p>
        </div>

        <div class="profile-section">
            <h2>ë‚˜ì˜ ì°½ì—… í”„ë¡œí•„</h2>
            <div class="profile-form">
                <div class="form-group">
                    <label>ë‚˜ì´</label>
                    <input type="number" id="age" placeholder="ë§Œ ë‚˜ì´ ì…ë ¥" value="32">
                </div>
                <div class="form-group">
                    <label>ì‚¬ì—… ì—°ì°¨</label>
                    <select id="business_age">
                        <option value="0">ì˜ˆë¹„ì°½ì—… (0ë…„)</option>
                        <option value="1">1ë…„ì°¨</option>
                        <option value="2">2ë…„ì°¨</option>
                        <option value="3">3ë…„ì°¨</option>
                        <option value="5">4-7ë…„ì°¨</option>
                        <option value="8">7ë…„ ì´ìƒ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ë¶„ì•¼</label>
                    <select id="industry">
                        <option value="IT">IT/ì†Œí”„íŠ¸ì›¨ì–´</option>
                        <option value="ê¸°ìˆ ">ê¸°ìˆ /ì œì¡°</option>
                        <option value="ì„œë¹„ìŠ¤">ì„œë¹„ìŠ¤</option>
                        <option value="ìœ í†µ">ìœ í†µ/ì»¤ë¨¸ìŠ¤</option>
                        <option value="ë¬¸í™”">ë¬¸í™”/ì½˜í…ì¸ </option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ì§€ì—­</label>
                    <select id="region">
                        <option value="ì„œìš¸">ì„œìš¸</option>
                        <option value="ê²½ê¸°">ê²½ê¸°</option>
                        <option value="ë¶€ì‚°">ë¶€ì‚°</option>
                        <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
                        <option value="ì¸ì²œ">ì¸ì²œ</option>
                        <option value="ëŒ€ì „">ëŒ€ì „</option>
                        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                    </select>
                </div>
            </div>
            <button class="btn" onclick="getRecommendations()">ë§ì¶¤ ì¶”ì²œ ë°›ê¸°</button>
        </div>

        <div class="stats-section" id="stats">
            <div class="stat-card">
                <div class="number">-</div>
                <div class="label">ì „ì²´ ì§€ì›ì‚¬ì—…</div>
            </div>
            <div class="stat-card">
                <div class="number">-</div>
                <div class="label">ì¶”ì²œ ì‚¬ì—…</div>
            </div>
            <div class="stat-card">
                <div class="number">-</div>
                <div class="label">ì‹ ì²­ ê°€ëŠ¥</div>
            </div>
        </div>

        <div class="filter-section">
            <input type="text" class="search-box" id="searchBox" placeholder="ì§€ì›ì‚¬ì—… ê²€ìƒ‰ (ì˜ˆ: ì˜ˆë¹„ì°½ì—…íŒ¨í‚¤ì§€, ì²­ë…„, AI ë“±)" onkeyup="filterPrograms()">
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterByCategory('all')">ì „ì²´</button>
                <button class="filter-btn" onclick="filterByCategory('ì°½ì—… ì´ˆê¸°')">ì°½ì—… ì´ˆê¸°</button>
                <button class="filter-btn" onclick="filterByCategory('ì„±ì¥ ë‹¨ê³„')">ì„±ì¥ ë‹¨ê³„</button>
                <button class="filter-btn" onclick="filterByCategory('IT/ê¸°ìˆ ')">IT/ê¸°ìˆ </button>
                <button class="filter-btn" onclick="filterByCategory('1ì¸ ì°½ì—…')">1ì¸ ì°½ì—…</button>
                <button class="filter-btn" onclick="filterByCategory('ìœµì')">ìœµì/ëŒ€ì¶œ</button>
                <button class="filter-btn" onclick="filterByCategory('íˆ¬ì')">íˆ¬ì</button>
                <button class="filter-btn" onclick="filterByCategory('ì„¸ì œ í˜œíƒ')">ì„¸ì œ í˜œíƒ</button>
            </div>
        </div>

        <div class="programs-section" id="programs">
            <div class="loading">ì§€ì›ì‚¬ì—… ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>
    </div>

    <script>
        let allPrograms = [];
        let currentCategory = 'all';

        async function loadPrograms() {
            try {
                const response = await fetch('/api/startup-support/programs');
                const data = await response.json();

                // í†µê³„ ì—…ë°ì´íŠ¸
                updateStats(data.statistics);

                // ëª¨ë“  í”„ë¡œê·¸ë¨ ì €ì¥
                allPrograms = [];
                for (const [type, programs] of Object.entries(data)) {
                    if (type !== 'statistics' && type !== 'last_updated') {
                        allPrograms.push(...programs.map(p => ({...p, program_type: type})));
                    }
                }

                displayPrograms(allPrograms);
            } catch (error) {
                console.error('Error loading programs:', error);
                document.getElementById('programs').innerHTML =
                    '<div class="empty-state">ì§€ì›ì‚¬ì—… ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
            }
        }

        function updateStats(stats) {
            const statCards = document.querySelectorAll('.stat-card .number');
            statCards[0].textContent = stats.total_programs;
            statCards[1].textContent = '-';
            statCards[2].textContent = stats.total_programs;
        }

        function displayPrograms(programs, isRecommended = false) {
            const container = document.getElementById('programs');

            if (programs.length === 0) {
                container.innerHTML = '<div class="empty-state">ì¡°ê±´ì— ë§ëŠ” ì§€ì›ì‚¬ì—…ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            container.innerHTML = programs.map(program => `
                <div class="program-card">
                    <div class="category-badge">${program.category || program.program_type}</div>
                    ${isRecommended ? '<div class="recommended-badge">ğŸ‘ ì¶”ì²œ</div>' : ''}
                    <h3>${program.name}</h3>
                    <div class="organization">ğŸ“ ${program.organization}</div>
                    <div class="support-amount">ğŸ’° ${program.support_amount}</div>
                    <div class="description">${program.description}</div>

                    <div class="details">
                        <div class="detail-item">
                            <span class="label">ì§€ì›ëŒ€ìƒ:</span>
                            <span class="value">${program.target || '-'}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">ì‹ ì²­ê¸°ê°„:</span>
                            <span class="value">${program.application_period || 'ìƒì‹œ'}</span>
                        </div>
                        ${program.requirements ? `
                            <div class="detail-item" style="display: block; margin-top: 10px;">
                                <span class="label">ì‹ ì²­ìš”ê±´:</span>
                                <ul class="requirements-list">
                                    ${program.requirements.map(req => `<li>${req}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                        ${program.benefits ? `
                            <div class="detail-item" style="display: block; margin-top: 10px;">
                                <span class="label">ì£¼ìš”í˜œíƒ:</span>
                                <ul class="benefits-list">
                                    ${program.benefits.map(ben => `<li>${ben}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                    </div>

                    <div class="actions">
                        <button class="btn-small" onclick="window.open('${program.website}', '_blank')">
                            ìì„¸íˆ ë³´ê¸°
                        </button>
                        <button class="btn-small" onclick="bookmarkProgram('${program.name}')">
                            ë¶ë§ˆí¬
                        </button>
                    </div>
                </div>
            `).join('');
        }

        async function getRecommendations() {
            const profile = {
                age: parseInt(document.getElementById('age').value),
                business_age: parseInt(document.getElementById('business_age').value),
                industry: document.getElementById('industry').value,
                region: document.getElementById('region').value
            };

            try {
                const response = await fetch('/api/startup-support/recommend', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(profile)
                });
                const data = await response.json();

                // í†µê³„ ì—…ë°ì´íŠ¸
                const statCards = document.querySelectorAll('.stat-card .number');
                statCards[1].textContent = data.count;

                displayPrograms(data.recommendations, true);
            } catch (error) {
                console.error('Error getting recommendations:', error);
            }
        }

        function filterByCategory(category) {
            currentCategory = category;

            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            filterPrograms();
        }

        function filterPrograms() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();

            let filtered = allPrograms;

            // ì¹´í…Œê³ ë¦¬ í•„í„°
            if (currentCategory !== 'all') {
                filtered = filtered.filter(p =>
                    (p.category && p.category.includes(currentCategory)) ||
                    (p.program_type && p.program_type.includes(currentCategory))
                );
            }

            // ê²€ìƒ‰ì–´ í•„í„°
            if (searchTerm) {
                filtered = filtered.filter(p =>
                    p.name.toLowerCase().includes(searchTerm) ||
                    p.description.toLowerCase().includes(searchTerm) ||
                    p.organization.toLowerCase().includes(searchTerm) ||
                    (p.target && p.target.toLowerCase().includes(searchTerm))
                );
            }

            displayPrograms(filtered);
        }

        function bookmarkProgram(name) {
            alert(`"${name}" ë¶ë§ˆí¬ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            // TODO: ë°±ì—”ë“œ API ì—°ë™
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ì „ì²´ í”„ë¡œê·¸ë¨ ë¶ˆëŸ¬ì˜¤ê¸°
        loadPrograms();
    </script>
</body>
</html>
