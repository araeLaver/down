name: Hourly Business Discovery

on:
  schedule:
    # 매시간 정각에 실행 (UTC 기준)
    - cron: '0 * * * *'
  workflow_dispatch:  # 수동 실행 가능

jobs:
  discover:
    runs-on: ubuntu-latest

    steps:
      - name: Trigger Business Discovery
        run: |
          curl -X POST "https://anonymous-kylen-untab-d30cd097.koyeb.app/api/trigger-discovery" \
            -H "Content-Type: application/json" \
            -w "\nHTTP Status: %{http_code}\n"

      - name: Check Result
        run: echo "Discovery triggered successfully"
